<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>End of Session - Note School</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="header">
        <h1 class="title">End of Session</h1>
    </header>
    <main class="main-content">
        <section class="end-section">
            <p>Congratulations on completing the session!</p>
            <div id="stats-display"></div>
            <div class="progress-bar-container">
                <div id="correct-progress" class="progress-bar correct"></div>
                <div id="incorrect-progress" class="progress-bar incorrect"></div>
            </div>
            <a href="index.html" class="button">Restart</a>
        </section>
    </main>
    <script>
        // Retrieve stats from localStorage
        const stats = JSON.parse(localStorage.getItem('stats')) || { notesPlayed: 0, correctNotes: 0, incorrectNotes: 0 };
        
        // Display stats
        const statsDisplay = document.getElementById('stats-display');
        statsDisplay.innerHTML = `
            <p>Notes Played: ${stats.notesPlayed}</p>
            <p>Correct Notes: ${stats.correctNotes}</p>
            <p>Incorrect Notes: ${stats.incorrectNotes}</p>
        `;

        // Calculate ratios
        const totalNotes = stats.correctNotes + stats.incorrectNotes;
        const correctRatio = totalNotes ? (stats.correctNotes / totalNotes) * 100 : 0;
        const incorrectRatio = totalNotes ? (stats.incorrectNotes / totalNotes) * 100 : 0;

        // Update progress bars
        document.getElementById('correct-progress').style.width = `${correctRatio}%`;
        document.getElementById('incorrect-progress').style.width = `${incorrectRatio}%`;
    </script>
</body>
</html>